{% extends "base.html" %}

{% block title %}Weekly Schedule{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/weekly.css') }}">

<div class="container mt-4">
  <h1 class="header">Weekly Schedule</h1>
  <h1 class="main-title">Week of {{ current_date.strftime("%d %B %Y") }}</h1>
  <p class="description">Your tasks and events for the week.</p>

  {% if weekly_items %}
    <ul class="task-list">
      {% for day, items in weekly_items.items() %}
        <li>
          <strong>{{ day.strftime("%d - %A") }}</strong>
          <ul>
            {% for item in items %}
              <li class="{% if item.__tablename__ == 'task' and item.completed %}completed{% endif %}">
                {% if item.time %}{{ item.time.strftime("%H:%M") }} - {% else %}(No time) - {% endif %}
                {{ item.text if item.__tablename__ == 'task' else item.title }}
                <span class="badge {% if item.__tablename__ == 'task' %}task-badge{% else %}event-badge{% endif %}">
                  {% if item.__tablename__ == 'task' %}Task{% else %}Event{% endif %}
                </span>
              </li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="no-tasks">No tasks or events scheduled this week.</p>
  {% endif %}
</div>

<div class="schedule-links" style="margin-top: 20px; text-align: center;">
  <h4>View Schedules</h4>
  <a href="{{ url_for('views.schedule_daily') }}">ðŸ“… Daily Schedule</a> |
  <a href="{{ url_for('views.schedule_monthly') }}">ðŸ—“ Monthly Schedule</a>
</div>
{% endblock %}
